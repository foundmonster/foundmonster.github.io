<!DOCTYPE HTML>
<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="author" content="Cory Malnarick" />
    <title>{{ page.title }}</title>
    <link rel="stylesheet" href="/assets/css/styles.css">
    <link rel="stylesheet" href="https://use.typekit.net/eps7atk.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NVSX678QE2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NVSX678QE2');
    </script>
  </head>

<body> 
  <main>
    {{ content }}
  </main> 
    <script>
        // Contact form handling
        const contactForm = document.getElementById('contactForm');
        const submitButton = document.getElementById('submitButton');
        const contactMessage = document.getElementById('contactMessage');

        contactForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            submitButton.disabled = true;
            submitButton.textContent = 'Sending...';

            try {
                const formData = new FormData(contactForm);
                const response = await fetch(contactForm.action, {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'Accept': 'application/json'
                    }
                });

                if (response.ok) {
                    contactMessage.textContent = "Thanks for reaching out! I'll get back to you within two business days.";
                    contactMessage.className = 'form-message success';
                    contactForm.reset();
                } else {
                    throw new Error('Network response was not ok');
                }
            } catch (error) {
                contactMessage.textContent = "Oops! There was a problem sending your message. Please try again or email me directly.";
                contactMessage.className = 'form-message error';
            }

            submitButton.disabled = false;
            submitButton.textContent = 'Start a Conversation';
        });
    </script>
</body>

<footer>
  {% include footer.html %}
</footer>

</html>
